(window["momentum-web-components-[id]"]=window["momentum-web-components-[id]"]||[]).push([[76],{99:function(e,t,r){"use strict";r.r(t),r.d(t,"TableAdvanced",(function(){return w}));r(17),r(15),r(32);var o=r(5),i=r(34),a=r(4),l=r(0),d=r(2),s=r(3),n=r(6),c=r(80),h=r(31),p=r.n(h),b=l.css`:host{display:block}.md-table-advanced{width:100%}table{border-collapse:separate;border-spacing:0;max-width:100%;position:relative;width:100%}table.sticky-header{height:100%}table.sticky-header thead th:first-child{border-left:1px solid var(--table-advanced-border-color,#dedede)}table.sticky-header thead th{background-color:var(--table-advanced-header-bg-color,#f7f7f7);border-left:0;border-top:0;position:sticky;top:0;z-index:1}table.sticky-header thead th::before{border-top:1px solid var(--table-advanced-border-color,#dedede);bottom:0;content:" ";left:0;position:absolute;top:0;width:100%}table.sticky-header thead tr:last-child th{top:2.5rem}table.sticky-header thead tr:last-child th::before{border-bottom:1px solid var(--table-advanced-border-color,#dedede);border-top:1px solid var(--table-advanced-border-color,#dedede)}table.sticky-header thead tr:first-child th{height:calc(2.5rem + .0625rem * 2);top:0}table.sticky-header thead tr:first-child th::before{border-bottom:1px solid var(--table-advanced-border-color,#dedede);border-top:1px solid var(--table-advanced-border-color,#dedede)}table.sticky-header thead tr:focus{outline:0}table.sticky-header thead tr:focus th:first-child{border-left:2px solid var(--md-focus-border-color)}table.sticky-header thead tr:focus th:last-child{border-right:2px solid var(--md-focus-border-color)}table.sticky-header thead tr:focus th::before{border-bottom:2px solid var(--md-focus-border-color);border-top:2px solid var(--md-focus-border-color)}thead th:first-child{border-left:1px solid var(--table-advanced-border-color,#dedede)}thead th{background-color:var(--table-advanced-header-bg-color,#f7f7f7);border:1px solid var(--table-advanced-border-color,#dedede);border-left:0;color:var(--md-secondary-text-color);font-family:"CiscoSansTT Regular","Helvetica Neue",Helvetica,Arial,sans-serif;font-size:14px;height:2.5rem;max-width:0;padding:0 calc(.375rem);position:relative;text-align:left}thead th .filter{display:inline-block;height:auto;margin-top:calc(.25rem / 2)}thead th .resize{background-color:transparent;cursor:col-resize;height:100%;left:calc(-.25rem / 2);position:absolute;top:0;width:.25rem;z-index:1}thead .head-inner-cell{align-items:center;display:flex;min-width:.875rem}thead .head-inner-cell .filter-wrap{align-items:center;display:inline-flex;flex:1;justify-content:flex-end}thead .head-inner-cell .filter-icon{color:var(--md-secondary-text-color);cursor:pointer;display:inline-block;height:1.5rem;min-width:1.25rem;position:relative;z-index:1}thead .head-inner-cell .filter-icon::part(button){padding:.25rem;text-align:center;width:1.5rem}thead .head-inner-cell .filter-icon:hover{background-color:var(--table-advanced-filter-hover-bg-color,#ededed)}thead .head-inner-cell .filter-icon:active{background-color:var(--table-advanced-filter-pressed-bg-color,#dedede)}thead .head-inner-cell span{display:inline-block;overflow:hidden;padding-right:calc(.25rem * 1.25);text-overflow:ellipsis;white-space:nowrap;width:100%}thead .head-inner-cell .sortable{background:0 0;border:0;color:var(--md-secondary-text-color);display:inline-block;min-width:calc(1rem * 2.5);overflow:hidden;padding-right:calc(.25rem * 4);text-overflow:ellipsis;white-space:nowrap;width:auto}thead md-menu-overlay::part(overlay){top:-.375rem;white-space:normal}@supports (-moz-appearance:none){thead md-menu-overlay::part(overlay){top:-.25rem;white-space:normal}}thead .drag-area-col{cursor:grab;display:block;height:calc(.25rem * 10);left:.25rem;position:absolute;right:.25rem;top:0;z-index:1}thead .drag-area-col.drag{border:2px dashed var(--table-advanced-filter-border-color,#ccc);opacity:1}thead .drag-area-col.over{background-color:#a87ff1;height:100%;opacity:.1}thead .sortable{cursor:pointer;position:relative;z-index:1}thead .sortable::after,thead .sortable::before{border:.25rem solid transparent;content:"";display:block;height:0;opacity:.3;position:absolute;right:.25rem;top:50%;width:0}thead .sortable::before{border-bottom-color:var(--md-secondary-text-color);margin-top:-9px}thead .sortable::after{border-top-color:var(--md-secondary-text-color);margin-top:1px}thead .sortable.ascending::after{opacity:1}thead .sortable.descending::before{opacity:1}.filter-active{display:inline-block;height:1.25rem;text-align:center;vertical-align:bottom;width:1.25rem}.filter-active::part(icon){line-height:.875rem}.filter-menu{background-color:var(--table-advanced-filter-bg-color,#fff);padding:calc(.25rem * 3);position:relative;z-index:1}.filter-menu select{background-color:var(--table-advanced-filter-bg-color,#fff);border:1px solid var(--table-advanced-filter-border-color,#ccc);color:var(--md-secondary-text-color);min-height:calc(.875rem * 1.8);width:100%}.filter-menu input{background-color:var(--table-advanced-filter-bg-color,#fff);border:1px solid var(--table-advanced-filter-border-color,#ccc);color:var(--md-secondary-text-color);margin-top:calc(.25rem * 2);width:100%}tbody tr{position:relative}tbody tr td:first-child{border-left:1px solid var(--table-advanced-border-color,#dedede)}tbody tr td{border-bottom:1px solid var(--table-advanced-border-color,#dedede);border-right:1px solid var(--table-advanced-border-color,#dedede);font-size:14px;height:2.5rem;max-width:0;padding:calc(.25rem * 1.5);position:relative}tbody tr th:first-child{border-top:1px solid var(--table-advanced-border-color,#dedede)}tbody tr th{background-color:var(--table-advanced-header-bg-color,#f7f7f7);border-bottom:1px solid var(--table-advanced-border-color,#dedede);border-right:1px solid var(--table-advanced-border-color,#dedede);font-size:14px;max-width:0;padding:0 calc(.25rem * 4);position:relative;text-align:left}tbody tr .inner-cell{display:flex;white-space:nowrap}tbody tr .inner-cell .warn-icon{display:inline-block;margin-left:.25rem;max-height:1.25rem;position:relative;vertical-align:middle;z-index:0}tbody tr .inner-cell md-icon::part(icon){line-height:1.25rem}tbody tr .inner-cell span{align-self:center;display:inline-block;flex:1;overflow:hidden;padding:0 .25rem;text-overflow:ellipsis;vertical-align:middle}tbody tr .drag-handle{cursor:grab;display:block;float:left;margin-right:calc(.25rem * 1.5)}tbody tr .drag-area{height:50%;left:0;opacity:.3;position:absolute;right:0}tbody tr .drag-area.top{top:0}tbody tr .drag-area.bottom{background-color:transparent;bottom:0}tbody tr.ghost{opacity:.3}tbody tr:hover{background-color:var(--table-advanced-hover-bg-color,#f7f7f7)}tbody tr:hover td,tbody tr:hover th{background-color:var(--table-advanced-hover-bg-color,#f7f7f7)}tbody tr.selected,tbody tr:active{background-color:var(--table-advanced-selected-bg-color,#ededed)}tbody tr.selected td,tbody tr.selected th,tbody tr:active td,tbody tr:active th{background-color:var(--table-advanced-selected-bg-color,#ededed)}md-button.row-collapsible{height:1.25rem;margin-right:calc(.25rem * 1.5);max-width:1.25rem;min-width:1.25rem}md-button.row-collapsible::part(button){border-radius:calc(.25rem / 2);padding:0 .25rem}md-button.row-collapsible md-icon::part(icon){line-height:calc(.25rem * 4)}`;function g(e=250){return function(t,r,o){let i;return function(e,t){if(e.descriptor=e.descriptor||Object.getOwnPropertyDescriptor(e.target,e.key),"function"!=typeof e.descriptor.value)return console.warn(e.key,"Decorator must be used on function"),e.descriptor;const r=e.descriptor.value,o=e.target.constructor.name;return e.descriptor.value=function(){const e=[];for(let t=0;t<arguments.length;t++)e[t]=arguments[t];return t.call(this,r,e,o)},e.descriptor}({target:t,key:r,descriptor:o},(function(t,r){clearTimeout(i),i=window.setTimeout(()=>{clearTimeout(i),t.apply(this,r)},e)}))}}class m{constructor(e,t){this.target=e,this.eventName=t}emit(e,t={bubbles:!0,composed:!0,cancelable:!1}){this.target.dispatchEvent(new CustomEvent(this.eventName,Object.assign({detail:e},t)))}}const u=new WeakMap,f=Object(d.directive)(e=>t=>{if(!(t instanceof d.NodePart))throw new Error("templateCallback can only be used in text bindings");const r=u.get(t);if(void 0!==r&&e.template===r.template&&t.value===r.fragment)return;const o=document.importNode(e.template.content,!0);e.cb({content:e.content,row:e.row,col:e.col,insertIndex:e.insertIndex,fragment:o}),t.setValue(o),u.set(t,{template:e.template,fragment:o})});var v;!function(e){const t={placeholder:"Filter..."};e.OPTIONS={equals:{label:"Equals",input:t,predicate:(e,t)=>e==t},notEqual:{label:"Not equal",input:t,predicate:(e,t)=>e!=t},contains:{label:"Contains",input:t,predicate:(e,t)=>e.includes(t)},notContains:{label:"Not contains",input:t,predicate:(e,t)=>!e.includes(t)},startsWith:{label:"Starts with",input:t,predicate:(e,t)=>e.startsWith(t)},endsWith:{label:"Ends with",input:t,predicate:(e,t)=>e.endsWith(t)},lessThan:{label:"Less than",input:t,predicate:(e,t)=>e<t},lessThanOrEquals:{label:"Less than or equals",input:t,predicate:(e,t)=>e<=t},greaterThan:{label:"Greater than",input:t,predicate:(e,t)=>e>t},greaterThanOrEquals:{label:"Greater than or equals",input:t,predicate:(e,t)=>e>=t}},e.optionsString=[e.OPTIONS.equals,e.OPTIONS.notEqual,e.OPTIONS.contains,e.OPTIONS.notContains,e.OPTIONS.startsWith,e.OPTIONS.endsWith],e.optionsNumber=[e.OPTIONS.equals,e.OPTIONS.notEqual,e.OPTIONS.lessThan,e.OPTIONS.lessThanOrEquals,e.OPTIONS.greaterThan,e.OPTIONS.greaterThanOrEquals]}(v||(v={}));var x=function(e,t,r,o){var i,a=arguments.length,l=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,r,o);else for(var d=e.length-1;d>=0;d--)(i=e[d])&&(l=(a<3?i(l):a>3?i(t,r,l):i(t,r))||l);return a>3&&l&&Object.defineProperty(t,r,l),l};const y=document.createElement("img");var w;y.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",function(e){let t=class extends(Object(i.a)(l.LitElement)){constructor(){super(...arguments),this.error="",this.COLS=[],this.ROWS=[],this.updCols=()=>this.requestUpdate("COLS"),this.updRows=()=>this.requestUpdate("ROWS"),this.dragRow=-1,this.dropRow=-1,this.drops=[],this.dragRowElem=null,this.dragCol=-1,this.dropCol=-1,this.isResizing=!1,this.isSelectable=!1,this.selected={},this.expandedRowIdx={},this.dragover=e=>e.preventDefault(),this.eX=0,this.onResize=(e,t)=>{var r;if(-1!=this.dragCol||-1!=this.dragRow)return;this.isResizing=!0;const o=e.target;null===(r=e.dataTransfer)||void 0===r||r.setDragImage(y,0,0);const i=this.COLS.map(e=>this.shadowRoot.querySelector("th.col-index-"+e.index));this.COLS.forEach((e,t)=>e.width=i[t].offsetWidth+"px"),this.updCols();const a=e.x;this.eX=e.x;let l=-1,d=-1,s=-1;const n=this.COLS[t.index-1],c=i[t.index],h=i[t.index-1],p=c.offsetWidth,b=h.offsetWidth,g=()=>{const e=this.eX;if(l!=e&&0!=e){l=e;const r=l-a;d=p-r,s=b+r,t.width=d+"px",n.width=s+"px",this.updCols()}},m=e=>this.eX=e.x,u=()=>{this.isResizing=!1,o.removeEventListener("drag",g),o.removeEventListener("dragend",u),document.removeEventListener("dragover",m)};o.addEventListener("drag",g),o.addEventListener("dragend",u),document.addEventListener("dragover",m)}}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("dragover",this.dragover)}connectedCallback(){super.connectedCallback(),document.addEventListener("dragover",this.dragover),this.updateTableConfig(),this.updateTableData(),this.populateTable()}update(e){super.update(e),e.has("data")&&(this.updateTableData(),this.updateDataInTable())}updateTableData(){if("string"==typeof this.data)try{this.tableData=JSON.parse(this.data)}catch(e){console.error("[INVALID_JSON_FORMAT] Please recheck the config json")}else this.tableData=Object.assign({},this.data)}updateTableConfig(){if("string"==typeof this.config)try{this.tableConfig=JSON.parse(this.config)}catch(e){console.error("[INVALID_JSON_FORMAT] Please recheck the data json")}else this.tableConfig=Object.assign({},this.config)}populateColumns(){var e;let t=0;const r=(e,r)=>{var o,i,a,l;const d=e.filters||(null===(i=null===(o=this.tableConfig.default)||void 0===o?void 0:o.col)||void 0===i?void 0:i.filters),s=d?"forString"==d?v.optionsString:"forNumber"==d?v.optionsNumber:d.length?d:null:null;this.COLS.push({options:Object.assign({},e),index:t++,group:r,sort:"default",sorter:e.sorter||(null===(l=null===(a=this.tableConfig.default)||void 0===a?void 0:a.col)||void 0===l?void 0:l.sorter),isCollapsable:this.tableConfig.cols.collapse==e.id,filter:s?{list:s,selectedIndex:0,input:"",active:!1,menuVisible:!1}:void 0})};this.tableConfig.cols.define.forEach(e=>{"children"in e?e.children.forEach(t=>r(t,{name:e.groupName,length:e.children.length})):r(e)}),this.isSelectable=!!this.tableConfig.rows&&"none"!=(null===(e=this.tableConfig.rows)||void 0===e?void 0:e.selectable)}populateData(){const e=this.COLS.length;if("csv"in this.tableData){const e=p.a.parse(this.tableData.csv,{skipEmptyLines:!0,transform:e=>e.trim()});if(e.errors)return void(this.error="PARSE ERROR:\n"+JSON.stringify(e.errors,null,2));{const t=e.data;this.ROWS=t.map(e=>e.map(e=>({text:e})))}}else if("list2d"in this.tableData)this.ROWS=this.tableData.list2d.map(e=>e.map(e=>({text:e})));else{for(;this.tableData.list.length>e;)this.ROWS.push(this.tableData.list.splice(0,e).map(e=>({text:e})));0!=this.tableData.list.length&&this.ROWS.push(this.tableData.list.map(e=>({text:e})))}0!=this.ROWS.length||(this.error="DATA ERROR: Data is empty")}validateData(){const e=this.COLS.length;this.ROWS.reduce((e,t)=>e+t.length,0)%e==0?this.ROWS.forEach((t,r)=>{const o=t.length;o!=e&&(this.error=`DATA ERROR: Total number of cols (=${e}) and data[${r}] length (=${o}) mismatch`)}):this.error=this.error="DATA ERROR: Data length mismatch. You must provide (numberOfRows * numberOfColumns) amount of data values."}populateTemplate(){const e=this.tableConfig.cellTemplates,t=Object.keys(e||{});e&&t.length&&this.ROWS.forEach((t,r)=>{t.forEach((t,o)=>{for(const i in e){const a=t.text.indexOf(i);if(-1!=a){const l=e[i],d=this.querySelector("#"+l.templateName);if(null==d){console.warn(`cellTemplates["${i}"]: Missing '${l.templateName}' template.`);continue}let s=t.text.replace(i,"");l.contentCb&&(s=l.contentCb({col:o,row:r,content:s,insertIndex:a})),this.ROWS[r][o]={text:s,template:{template:d,templateCb:l.templateCb,insertIndex:"replace"==l.contentUse?-1:a}};break}}})})}setDefaultFilterAndSort(){var e,t;const r=null===(e=this.tableConfig.default)||void 0===e?void 0:e.sort;if(r){const e=this.COLS.find(e=>e.options.id==r.colId);e?this.sort(e,r.order):console.warn(`Cant find ${r.colId} col - for sorting`)}const o=null===(t=this.tableConfig.default)||void 0===t?void 0:t.filter;if(o){const e=this.COLS.find(e=>e.options.id==o.colId);e?e.filter?(e.filter.selectedIndex=o.selectedIndex,e.filter.input=o.input,this.updCols(),this.filter(e)):console.warn(`Cant find filters on ${o.colId} col`):console.warn(`Cant find ${o.colId} col - for filtering`)}}populateTable(){this.populateColumns(),this.populateData(),this.validateData(),this.setDefaultFilterAndSort(),this.populateTemplate()}updateDataInTable(){this.populateData(),this.validateData(),this.populateTemplate()}onDropRow(){this.dragRow!=this.dropRow&&this.drops.push([this.dragRow,this.dropRow]),this.dragRow=-1,this.dropRow=-1,this.dragRowElem&&(this.dragRowElem.setAttribute("draggable","false"),this.dragRowElem=null)}onDropCol(){if(this.dragCol!=this.dropCol){const e=this.COLS[this.dragCol],t=this.COLS[this.dropCol],r=e.group,o=t.group,i=e.index,a=t.index;e.group=o,t.group=r,e.index=a,t.index=i,this.COLS[this.dragCol]=t,this.COLS[this.dropCol]=e,this.ROWS.forEach(e=>{const t=e[this.dragCol],r=e[this.dropCol];e[this.dragCol]=r,e[this.dropCol]=t}),this.updCols(),this.updRows()}this.dragCol=-1,this.dropCol=-1}sort(e,t){e.sorter&&(this.clearSelection(),this.drops=[],this.COLS.forEach(r=>{r.options.id==e.options.id?r.sort=t||("default"==r.sort?"ascending":"ascending"==r.sort?"descending":"default"):r.sort="default"}),this.updCols(),this.requestUpdate(),this["md-table-advanced-change"].emit({type:"sort",order:e.sort}))}filter(e){if(!e.filter)return;this.clearSelection(),this.drops=[];const t=e.filter.input.trim(),r=e.filter.list[e.filter.selectedIndex];e.filter.active=!!t,this.requestUpdate(),t?this["md-table-advanced-change"].emit({type:"filter-on",filter:r,input:t}):this["md-table-advanced-change"].emit({type:"filter-off",filter:e.filter.list[e.filter.selectedIndex]})}selectRow(e){var t;const r=e.row.idx,o=this.selected.hasOwnProperty(r);"multiple"==(null===(t=this.tableConfig.rows)||void 0===t?void 0:t.selectable)?(e.metaKey?o?delete this.selected[r]:this.selected[r]=!0:e.shiftKey||(this.selected={[r]:!0}),this["md-table-advanced-change"].emit({type:"multi-select",rows:Object.keys(this.selected).map(e=>+e)})):o?this.clearSelection():(this.selected={[r]:!0},this["md-table-advanced-change"].emit({type:"select",index:r})),this.requestUpdate("selected")}clearSelection(){this.selected={},this.requestUpdate("selected")}collapseToggle(e,t){e.stopPropagation(),this.expandedRowIdx[t]?(delete this.expandedRowIdx[t],this["md-table-advanced-change"].emit({type:"collapse",row:t})):(this.expandedRowIdx[t]=!0,this["md-table-advanced-change"].emit({type:"expand",row:t})),this.clearSelection(),this.requestUpdate()}render(){if(this.error)return l.html`
          <div>${this.error}</div>
        `;const{head:e}=this.tableConfig,t=Object(s.classMap)({"sticky-header":!!this.tableConfig.isStickyHeader});return l.html`
        <div class="md-table-advanced">
          <slot></slot>
          <table class=${t} summary=${Object(n.ifDefined)(null==e?void 0:e.summary)}>
            ${(null==e?void 0:e.caption)?l.html`
                  <caption>
                    ${null==e?void 0:e.caption}
                  </caption>
                `:d.nothing}
            ${this.renderHead()} ${this.renderBody()}
          </table>
        </div>
      `}renderHead(){let e=d.nothing;const t=this.COLS.reduce((e,t)=>!!t.group||e,!1);if(t){let t="";e=l.html`
          ${this.COLS.map(e=>e.group?t!=e.group.name?(t=e.group.name,l.html`
                  <colgroup span=${e.group.length}></colgroup>
                `):void 0:l.html`
                <col />
              `)}
          <tr tabindex="0">
            ${this.COLS.map(e=>e.group?t!=e.group.name?(t=e.group.name,l.html`
                    <th colspan=${e.group.length} scope="colgroup" title="${e.group.name}">
                      <div class="head-inner-cell">
                        <span>${e.group.name}</span>
                        ${this.renderColResize(e)}
                      </div>
                    </th>
                  `):void 0:this.renderCol(e,2))}
          </tr>
        `}const r=l.html`
        <tr tabindex="0">
          ${this.COLS.map(e=>t?e.group?this.renderCol(e):void 0:this.renderCol(e))}
        </tr>
      `;return l.html`
        <thead>
          ${e} ${r}
        </thead>
      `}renderCol(e,t){var r,o;const i=null===(o=null===(r=e.filter)||void 0===r?void 0:r.list[e.filter.selectedIndex])||void 0===o?void 0:o.input,a=Object(s.classMap)({ascending:"ascending"==e.sort,descending:"descending"==e.sort});return l.html`
        <th
          rowspan=${Object(n.ifDefined)(t)}
          width=${Object(n.ifDefined)(e.width?e.width:e.options.width)}
          scope="col"
          part="head-col"
          title="${e.options.title}"
          class=${"col-index-"+e.index}
        >
          <!-- DRAG  -->
          ${this.renderColDrag(e)}

          <div class="head-inner-cell">
            <!-- SORT  -->
            ${e.sorter?l.html`
                  <button class="sortable ${a}" @click=${()=>this.sort(e)}>${e.options.title}</button>
                `:l.html`
                  <span>${e.options.title}</span>
                `}

            <!-- FILTER -->
            ${e.filter?l.html`
                  <div class="filter-wrap">
                    ${e.filter.active?l.html`
                          <md-icon class="filter-active" name="filter-adr_14"></md-icon>
                        `:d.nothing}
                    <md-menu-overlay placement="bottom" class="filter" custom-width="188px">
                      <md-button class="filter-icon" slot="menu-trigger" color="color-none" size="size-none">
                        <md-icon slot="icon" name="filter_16"></md-icon>
                      </md-button>
                      <div class="filter-menu" style="width: 100%;">
                        <select
                          name="filter-type"
                          @change=${t=>{e.filter.selectedIndex=t.target.value,this.updCols(),this.filter(e)}}
                        >
                          ${e.filter.list.map((t,r)=>l.html`
                              <option value=${r} ?selected=${e.filter.selectedIndex==r}>${t.label}</option>
                            `)}
                        </select>
                        <input
                          type="text"
                          placeholder=${i.placeholder}
                          maxlength=${Object(n.ifDefined)(i.maxlength)}
                          pattern=${Object(n.ifDefined)(i.pattern)}
                          .value=${e.filter.input}
                          @input=${t=>{e.filter.input=t.target.value,this.updCols(),this.filter(e)}}
                        />
                      </div>
                    </md-menu-overlay>
                  </div>
                `:d.nothing}

            <!-- RESIZE  -->
            ${this.renderColResize(e)}
          </div>
        </th>
      `}renderColDrag(e){return this.tableConfig.cols.isDraggable?l.html`
            <div
              draggable="true"
              class="drag-area-col ${Object(s.classMap)({drag:-1!=this.dragCol,over:this.dropCol==e.index&&this.dropCol!=this.dragCol})}"
              @dragstart=${t=>{this.isResizing||-1!=this.dragRow||(this.dragCol=e.index,t.dataTransfer.setDragImage(t.target.parentNode,0,0))}}
              @dragenter=${()=>{this.isResizing||-1!=this.dragRow||(this.dropCol=e.index)}}
              @dragend=${()=>this.onDropCol()}
            ></div>
          `:d.nothing}renderColResize(e){return this.tableConfig.cols.isResizable?l.html`
            ${e.index>0?l.html`
                  <div class="resize" draggable="true" @dragstart=${t=>this.onResize(t,e)}></div>
                `:d.nothing}
          `:d.nothing}renderBody(){let e=this.ROWS.map((e,t)=>({cells:e,idx:t,idxDrag:t,collapse:"none",first:0===t,isGhost:!1,children:[]}));const t=this.COLS.length;e=e.filter(e=>{var r;for(let o=0;o<t;o++){const t=this.COLS[o];if(null===(r=t.filter)||void 0===r?void 0:r.active){if(!t.filter.list[t.filter.selectedIndex].predicate(e.cells[o].text,t.filter.input))return!1}}return!0});const r=this.COLS.find(e=>"default"!=e.sort);if(r){const t=this.ROWS.map((e,t)=>({v:e[r.index].text,i:t})),o="ascending"==r.sort?1:-1;let i=[];if("byNumber"==r.sorter)i=t.sort((e,t)=>1==o?+e.v-+t.v:+t.v-+e.v);else if("byString"==r.sorter)i=t.sort((e,t)=>e.v==t.v?0:e.v>t.v?o:-o);else if("function"==typeof r.sorter){const e=r.sorter;i=t.sort((t,r)=>e(t.v,r.v,o))}e=i.map(t=>e[t.i])}const o=this.COLS.find(e=>e.isCollapsable);if(o){const t=o.index,r=e.reduce((e,r)=>{const o=r.cells[t].text,i=e.find(e=>e.key==o);return i?(r.collapse="child",i.children.push(r)):e.push({key:o,root:r,children:[]}),e},[]);e=[],r.forEach(t=>{e.push(t.root),t.root.collapse=0==t.children.length?"none":this.expandedRowIdx[t.root.idx]?"expanded":"collapsed",t.root.children=t.children})}return this.drops.forEach(({0:t,1:r})=>{e.splice(r,0,e.splice(t,1)[0])}),e.forEach((e,t)=>e.idxDrag=t),-1!=this.dragRow&&(e[this.dragRow].isGhost=!0,-1!=this.dropRow&&e.splice(this.dropRow,0,e.splice(this.dragRow,1)[0])),l.html`
        <tbody>
          ${e.map(t=>{const r=e.length,o=t.children.length>0&&"expanded"==t.collapse&&!t.isGhost;return l.html`
              ${this.renderRow(t,r)} ${o?t.children.map(e=>this.renderRow(e,r)):d.nothing}
            `})}
        </tbody>
      `}renderRow(e,t){const r=this.selected.hasOwnProperty(e.idx),o=Object(s.classMap)({selected:r,selectable:this.isSelectable&&!r,ghost:e.isGhost});return l.html`
        <tr
          class=${o}
          tabindex="0"
          part=${e.first?"first-row":"row"}
          @click=${({shiftKey:t,metaKey:r})=>{this.isSelectable&&this.selectRow({row:e,shiftKey:t,metaKey:r})}}
        >
          ${e.cells.map((r,o)=>{var i;const a=this.COLS[o];let s=r.text;const n=r.template;n&&(s=n.templateCb?l.html`
                    ${f({cb:n.templateCb,insertIndex:n.insertIndex,template:n.template,content:r.text,row:e.idx,col:o})}
                  `:l.html`
                    ${Object(c.templateContent)(n.template)}
                  `,-1!=n.insertIndex&&(s=l.html`
                  ${n.insertIndex>0?r.text.substring(0,n.insertIndex):d.nothing} ${s}
                  ${n.insertIndex<r.text.length-1?r.text.substring(n.insertIndex):d.nothing}
                `));const h=(null===(i=this.tableConfig.rows)||void 0===i?void 0:i.isDraggable)&&"child"!=e.collapse,p=h&&-1!=this.dragRow&&this.dragRow!=e.idxDrag,b=h&&0==o,g=l.html`
              <div
                class="inner-cell"
                draggable="false"
                @dragstart=${()=>{this.isResizing||-1!=this.dragCol||(this.dragRow=e.idxDrag)}}
                @dragend=${()=>this.onDropRow()}
              >
                ${p?l.html`
                      <div
                        class="drag-area top"
                        @dragenter=${()=>{if(0==this.dragRow){const t=e.idxDrag-1;this.dropRow=t>=0?t:0}else this.dropRow=e.idxDrag}}
                      ></div>
                      <div
                        class="drag-area bottom"
                        @dragenter=${()=>{if(0==this.dragRow)this.dropRow=e.idxDrag;else{const r=e.idxDrag+1;this.dropRow=r<t?r:t-1}}}
                      ></div>
                    `:d.nothing}
                ${b?l.html`
                      <md-icon
                        class="drag-handle"
                        @mousedown=${e=>{this.isResizing||-1!=this.dragCol||(this.dragRowElem=e.target.parentNode,this.dragRowElem.setAttribute("draggable","true"))}}
                        name="panel-control-dragger_16"
                      >
                      </md-icon>
                    `:d.nothing}
                ${a.isCollapsable?l.html`
                      ${"expanded"==e.collapse||"collapsed"==e.collapse?l.html`
                            <md-button
                              class="row-collapsible"
                              size="size-none"
                              @click=${t=>this.collapseToggle(t,e.idx)}
                              outline
                              color="color-none"
                            >
                              ${"collapsed"==e.collapse?l.html`
                                    <md-icon slot="icon" name="plus_12"></md-icon>
                                  `:l.html`
                                    <md-icon slot="icon" name="minus_12"></md-icon>
                                  `}
                            </md-button>
                          `:d.nothing}
                      <span>${"child"==e.collapse?d.nothing:s}</span>
                    `:l.html`
                      <span>${s}</span>
                    `}
              </div>
            `;return a.options.isHeader?l.html`
                  <th part="cell-ishead" scope="row" title="${r.text}">${g}</th>
                `:l.html`
                  <td part=${0===o?"first-cell":"cell"} title="${r.text}">${g}</td>
                `})}
        </tr>
      `}static get styles(){return[a.a,b]}};x([Object(l.property)({attribute:"config"})],t.prototype,"config",void 0),x([Object(l.property)({attribute:"data"})],t.prototype,"data",void 0),x([(e,t)=>{const r={get(){return new m(this,void 0!==t?t:e.key)},enumerable:!0,configurable:!0};return void 0!==t?Object.defineProperty(e,t,r):{kind:"method",placement:"prototype",key:e.key,descriptor:r}}],t.prototype,"md-table-advanced-change",void 0),x([Object(l.internalProperty)()],t.prototype,"tableConfig",void 0),x([Object(l.internalProperty)()],t.prototype,"tableData",void 0),x([Object(l.internalProperty)()],t.prototype,"error",void 0),x([Object(l.internalProperty)()],t.prototype,"COLS",void 0),x([Object(l.internalProperty)()],t.prototype,"ROWS",void 0),x([Object(l.internalProperty)()],t.prototype,"dragRow",void 0),x([Object(l.internalProperty)()],t.prototype,"dropRow",void 0),x([Object(l.internalProperty)()],t.prototype,"drops",void 0),x([Object(l.internalProperty)()],t.prototype,"dragCol",void 0),x([Object(l.internalProperty)()],t.prototype,"dropCol",void 0),x([Object(l.queryAll)("tr[tabindex]")],t.prototype,"tableRaws",void 0),x([g(500)],t.prototype,"filter",null),t=x([Object(o.a)("md-table-advanced")],t),e.ELEMENT=t}(w||(w={}))}}]);